<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>To-Do List</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center">
  <div class="w-full max-w-md bg-white shadow-lg pb-32">

    <!-- Header -->
    <div class="text-purple-800 p-6 rounded-b-3xl text-center">
      <h2 class="text-lg font-semibold">To-Do List</h2>
    </div>

    <!-- Main Content -->
    <div class="bg-purple-800 text-white text-center py-8 px-4 rounded-b-3xl">
      <div class="mb-2">
        <div class="w-12 h-12 bg-white text-purple-800 mx-auto rounded-full flex items-center justify-center">
          <i class="fas fa-list text-purple-800 text-xl"></i>
        </div>
      </div>
      <p class="text-sm" id="task-counter">List 1/6 Completed</p>
      <div class="flex justify-center gap-4 mt-4">
        <button id="delete-checked-btn" class="bg-white text-purple-800 py-2 px-4 rounded-full">Delete Checked</button>
      </div>
      <div class="flex justify-center gap-6 text-white text-2xl mt-6">
        <a href="bills.html"><i class="fas fa-money-bill text-white"></i></a>
        <a href="shoping-list.html"><i class="fas fa-shopping-cart text-white"></i></a>
      </div>
    </div>

    <!-- Task List -->
    <div class="p-4" id="task-list">
      <!-- משימות קיימות -->
    </div>

    <!-- Add Task Button -->
    <div class="p-4">
      <button onclick="openModal()" class="w-full bg-purple-800 hover:bg-purple-900 text-white py-2 rounded flex items-center justify-center gap-2">
        &#10010; Add new task
      </button>
    </div>
  </div>

  <!-- MODAL -->
  <div id="modal" class="fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center hidden z-10">
    <div class="bg-white rounded-lg shadow-xl w-80 p-6 relative">
      <button onclick="closeModal()" class="absolute top-2 right-2 text-xl text-gray-500 hover:text-gray-700">&times;</button>
      <h3 class="text-2xl font-extrabold uppercase tracking-wide mb-4">Add New Task</h3>
      <label class="block text-sm font-medium mb-1">Task name</label>
      <input type="text" id="new-task-input" placeholder="–" class="w-full border rounded px-3 py-2 mb-4 outline-none focus:ring-2 focus:ring-purple-400" />
      <button onclick="saveTask()" class="w-full bg-purple-800 hover:bg-purple-900 text-white py-2 rounded">Save</button>
    </div>
  </div>

  <!-- JS -->
  <script>
    const taskList = document.getElementById('task-list');
    const counter = document.getElementById('task-counter');
    const modal = document.getElementById('modal');
    const input = document.getElementById('new-task-input');
    const deleteCheckedBtn = document.getElementById('delete-checked-btn');

    // משימות ראשוניות
    const initialTasks = ['Toilet cleaning', 'Kitchen cleaning', 'Garbage removal', 'Cooking dinner', 'Window cleaning', 'Payment management'];
    initialTasks.forEach(name => createTask(name, name === 'Toilet cleaning'));

    function updateCount() {
      const checkboxes = taskList.querySelectorAll('input[type="checkbox"]');
      const completed = [...checkboxes].filter(cb => cb.checked).length;
      counter.textContent = `List ${completed}/${checkboxes.length} Completed`;
    }

    function createTask(name, checked = false) {
      const taskItem = document.createElement('div');
      taskItem.className = "bg-gray-100 p-3 rounded-lg flex justify-between items-center mb-2";

      taskItem.innerHTML = `
        <div class="flex items-center gap-2">
          <input type="checkbox" class="w-5 h-5" ${checked ? "checked" : ""}>
          <label class="${checked ? 'line-through text-purple-800 font-semibold' : ''}">${name}</label>
        </div>
      `;

      const checkbox = taskItem.querySelector('input[type="checkbox"]');
      const label = taskItem.querySelector('label');
      checkbox.addEventListener('change', () => {
        if (checkbox.checked) {
          label.classList.add('line-through', 'text-purple-800', 'font-semibold');
        } else {
          label.classList.remove('line-through', 'text-purple-800', 'font-semibold');
        }
        updateCount();
      });

      taskList.appendChild(taskItem);
      updateCount();
    }

    function deleteCheckedTasks() {
      const checkedItems = taskList.querySelectorAll('input[type="checkbox"]:checked');
      checkedItems.forEach(checkbox => {
        const taskItem = checkbox.closest('div.bg-gray-100');
        taskItem.style.transition = 'opacity 0.5s ease-out';
        taskItem.style.opacity = '0';
        setTimeout(() => {
          taskItem.remove();
          updateCount();
        }, 500);
      });
    }

    deleteCheckedBtn.addEventListener('click', deleteCheckedTasks);

    function openModal() {
      modal.classList.remove('hidden');
      input.value = "";
      setTimeout(() => input.focus(), 100);
    }

    function closeModal() {
      modal.classList.add('hidden');
    }

    function saveTask() {
      const name = input.value.trim();
      if (name) {
        createTask(name);
        closeModal();
      } else {
        input.focus();
      }
    }
  </script>
</body>
</html>
